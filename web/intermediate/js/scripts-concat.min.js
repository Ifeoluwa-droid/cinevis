var xField="Budget",yField="Worldwide Gross",xDomain,yDomain,xScale,yScale,xAxis,yAxis,locate=function(a,b){var c,d,e;b==="x"?(c=a[xField],d=xScale,e=xDomain):(c=a[yField],d=yScale,e=yDomain);return $.isNumeric(c)?d(c):e[0]};
d3.json("/data/moviedata.json",function(a){var b=$("#vis").width(),c=$("#vis").height(),d=[0,b-60],e=[c-60,0];xDomain=[d3.min(a,function(a){return $.isNumeric(a[xField])?+a[xField]:0}),d3.max(a,function(a){return $.isNumeric(a[xField])?+a[xField]:0})];yDomain=[d3.min(a,function(a){return $.isNumeric(a[yField])?+a[yField]:0}),d3.max(a,function(a){return $.isNumeric(a[yField])?+a[yField]:0})];xScale=d3.scale.linear().domain(xDomain).range(d);yScale=d3.scale.linear().domain(yDomain).range(e);xAxis=d3.svg.axis().scale(xScale).orient("bottom").ticks(5).tickSize(-(c-
60),0,0).tickFormat(d3.format(",.0f"));yAxis=d3.svg.axis().orient("left").scale(yScale).ticks(5).tickSize(-(b-60),0,0).tickFormat(d3.format(",.0f"));b=d3.select("#vis").append("svg").attr("width",b).attr("height",c).append("g").attr("transform","translate(45,15)");b.append("g").attr("class","x axis").attr("transform","translate(0,"+(c-60)+")").call(xAxis);b.append("g").attr("class","y axis").attr("transform","translate(0,0)").call(yAxis);b.selectAll("circle").data(a).enter().append("circle").attr("class",
"point").attr("cx",function(a){return locate(a,"x")}).attr("cy",function(a){return locate(a,"y")}).attr("r",5).on("mouseover",mouseover).on("mouseout",mouseout)});
function mouseover(a){$("#details").css("display","inline");$("#detail-film-value").html(a.Film);$("#detail-year-value").html(a.Year);$("#detail-profitability-value").html(a.Profitability);$("#detail-budget-value").html(a.Budget);$("#detail-theatres-value").html(a["Number of Theatres in US Opening Weekend"]);$("#detail-worldwide-value").html(a["Worldwide Gross"]);$("#detail-audience-value").html(a["Audience  score %"]);$("#detail-genre-value").html(a.Genre);$("#detail-openingweekend-value").html(a["Opening Weekend"]);
$("#detail-domestic-value").html(a["Domestic Gross"]);$("#detail-rotten-value").html(a["Rotten Tomatoes %"]);$("#detail-story-value").html(a.Story);$("#detail-avgcinema-value").html(a["Box Office Average per US Cinema (Opening Weekend)"]);$("#detail-foreign-value").html(a["Foreign Gross"]);$("#detail-oscar-value").html(a.Oscar);$("#detail-studio-value").html(a["Lead Studio"]);d3.select(this).attr("fill",function(){return"#666"}).attr("stroke","orange")}
function mouseout(){d3.select(this).attr("fill",null).attr("stroke",null)};
