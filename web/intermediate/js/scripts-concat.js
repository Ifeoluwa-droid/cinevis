(function(a,d){function b(c){return!a(c).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}function e(c,f){var g=c.nodeName.toLowerCase();if("area"===g){var g=c.parentNode,d=g.name;if(!c.href||!d||g.nodeName.toLowerCase()!=="map")return!1;g=a("img[usemap=#"+d+"]")[0];return!!g&&b(g)}return(/input|select|textarea|button|object/.test(g)?!c.disabled:"a"==g?c.href||f:f)&&b(c)}a.ui=a.ui||{};a.ui.version||(a.extend(a.ui,{version:"1.8.17",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(c,f){return typeof c=="number"?this.each(function(){var b=
this;setTimeout(function(){a(b).focus();f&&f.call(b)},c)}):this._focus.apply(this,arguments)},scrollParent:function(){var c;a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?c=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):c=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,
"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!c.length?a(document):c},zIndex:function(c){if(c!==d)return this.css("zIndex",c);if(this.length)for(var c=a(this[0]),f;c.length&&c[0]!==document;){f=c.css("position");if(f==="absolute"||f==="relative"||f==="fixed")if(f=parseInt(c.css("zIndex"),10),!isNaN(f)&&f!==0)return f;c=c.parent()}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(c){c.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,f){function b(c,f,d,g){a.each(e,function(){f-=parseFloat(a.curCSS(c,"padding"+this,!0))||0;d&&(f-=parseFloat(a.curCSS(c,"border"+this+"Width",!0))||0);g&&(f-=parseFloat(a.curCSS(c,"margin"+this,!0))||0)});return f}var e=f==="Width"?["Left","Right"]:["Top","Bottom"],h=f.toLowerCase(),j={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,
outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+f]=function(c){return c===d?j["inner"+f].call(this):this.each(function(){a(this).css(h,b(this,c)+"px")})};a.fn["outer"+f]=function(c,d){return typeof c!="number"?j["outer"+f].call(this,c):this.each(function(){a(this).css(h,b(this,c,!0,d)+"px")})}}),a.extend(a.expr[":"],{data:function(c,f,b){return!!a.data(c,b[3])},focusable:function(c){return e(c,!isNaN(a.attr(c,"tabindex")))},tabbable:function(c){var f=a.attr(c,"tabindex"),b=isNaN(f);
return(b||f>=0)&&e(c,!b)}}),a(function(){var c=document.body,f=c.appendChild(f=document.createElement("div"));a.extend(f.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=f.offsetHeight===100;a.support.selectstart="onselectstart"in f;c.removeChild(f).style.display="none"}),a.extend(a.ui,{plugin:{add:function(c,f,b){var c=a.ui[c].prototype,d;for(d in b)c.plugins[d]=c.plugins[d]||[],c.plugins[d].push([f,b[d]])},call:function(c,a,b){if((a=c.plugins[a])&&c.element[0].parentNode)for(var d=
0;d<a.length;d++)c.options[a[d][0]]&&a[d][1].apply(c.element,b)}},contains:function(c,a){return document.compareDocumentPosition?c.compareDocumentPosition(a)&16:c!==a&&c.contains(a)},hasScroll:function(c,b){if(a(c).css("overflow")==="hidden")return!1;var d=b&&b==="left"?"scrollLeft":"scrollTop",e=!1;if(c[d]>0)return!0;c[d]=1;e=c[d]>0;c[d]=0;return e},isOverAxis:function(c,a,b){return c>a&&c<a+b},isOver:function(c,b,d,e,h,j){return a.ui.isOverAxis(c,d,h)&&a.ui.isOverAxis(b,e,j)}}))})(jQuery);
(function(a,d){if(a.cleanData){var b=a.cleanData;a.cleanData=function(c){for(var d=0,e;(e=c[d])!=null;d++)try{a(e).triggerHandler("remove")}catch(i){}b(c)}}else{var e=a.fn.remove;a.fn.remove=function(c,b){return this.each(function(){b||(!c||a.filter(c,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(c){}});return e.call(a(this),c,b)})}}a.widget=function(c,b,d){var e=c.split(".")[0],h;c=c.split(".")[1];h=e+"-"+c;d||(d=b,b=a.Widget);a.expr[":"][h]=
function(b){return!!a.data(b,c)};a[e]=a[e]||{};a[e][c]=function(c,a){arguments.length&&this._createWidget(c,a)};b=new b;b.options=a.extend(!0,{},b.options);a[e][c].prototype=a.extend(!0,b,{namespace:e,widgetName:c,widgetEventPrefix:a[e][c].prototype.widgetEventPrefix||c,widgetBaseClass:h},d);a.widget.bridge(c,a[e][c])};a.widget.bridge=function(c,b){a.fn[c]=function(e){var i=typeof e=="string",h=Array.prototype.slice.call(arguments,1),j=this,e=!i&&h.length?a.extend.apply(null,[!0,e].concat(h)):e;if(i&&
e.charAt(0)==="_")return j;i?this.each(function(){var b=a.data(this,c),f=b&&a.isFunction(b[e])?b[e].apply(b,h):b;if(f!==b&&f!==d)return j=f,!1}):this.each(function(){var d=a.data(this,c);d?d.option(e||{})._init():a.data(this,c,new b(e,this))});return j}};a.Widget=function(c,a){arguments.length&&this._createWidget(c,a)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(c,b){a.data(b,this.widgetName,this);this.element=a(b);this.options=a.extend(!0,
{},this.options,this._getCreateOptions(),c);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(b,e){var g=b;if(arguments.length===0)return a.extend({},this.options);if(typeof b=="string"){if(e===d)return this.options[b];g={};g[b]=e}this._setOptions(g);return this},_setOptions:function(b){var d=this;a.each(b,function(b,a){d._setOption(b,a)});return this},_setOption:function(b,a){this.options[b]=a;b==="disabled"&&this.widget()[a?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
a);return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,d,e){var i,h=this.options[b];e=e||{};d=a.Event(d);d.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();d.target=this.element[0];b=d.originalEvent;if(b)for(i in b)i in d||(d[i]=b[i]);this.element.trigger(d,e);return!(a.isFunction(h)&&h.call(this.element[0],d,e)===!1||d.isDefaultPrevented())}}})(jQuery);
(function(a){var d=!1;a(document).mouseup(function(){d=!1});a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(d){if(!0===a.data(d.target,b.widgetName+".preventClickEvent"))return a.removeData(d.target,b.widgetName+".preventClickEvent"),d.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName)},_mouseDown:function(b){if(!d){this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var e=this,c=b.which==1,f=typeof this.options.cancel=="string"&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!c||f||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=
this._mouseStart(b)!==!1,!this._mouseStarted))return b.preventDefault(),!0;!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(b){return e._mouseMove(b)};this._mouseUpDelegate=function(b){return e._mouseUp(b)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);b.preventDefault();d=!0;return!0}},_mouseMove:function(b){if(a.browser.msie&&
!(document.documentMode>=9)&&!b.button)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&
(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(a){a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var d=this,b=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),c=b.values&&b.values.length||1,f=[];this._keySliding=!1;this._mouseSliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+
this.orientation+" ui-widget ui-widget-content ui-corner-all"+(b.disabled?" ui-slider-disabled ui-disabled":""));this.range=a([]);b.range&&(b.range===!0&&(b.values||(b.values=[this._valueMin(),this._valueMin()]),b.values.length&&b.values.length!==2&&(b.values=[b.values[0],b.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(b.range==="min"||b.range==="max"?" ui-slider-range-"+b.range:"")));for(var g=e.length;g<c;g+=1)f.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=e.add(a(f.join("")).appendTo(d.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(b){b.preventDefault()}).hover(function(){b.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){b.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")});this.handles.each(function(b){a(this).data("index.ui-slider-handle",
b)});this.handles.keydown(function(b){var c=!0,e=a(this).data("index.ui-slider-handle"),f,g,k;if(!d.options.disabled){switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(c=!1,!d._keySliding&&(d._keySliding=!0,a(this).addClass("ui-state-active"),f=d._start(b,e),f===!1))return}f=d.options.step;d.options.values&&d.options.values.length?g=k=d.values(e):
g=k=d.value();switch(b.keyCode){case a.ui.keyCode.HOME:k=d._valueMin();break;case a.ui.keyCode.END:k=d._valueMax();break;case a.ui.keyCode.PAGE_UP:k=d._trimAlignValue(g+(d._valueMax()-d._valueMin())/5);break;case a.ui.keyCode.PAGE_DOWN:k=d._trimAlignValue(g-(d._valueMax()-d._valueMin())/5);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(g===d._valueMax())return;k=d._trimAlignValue(g+f);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(g===d._valueMin())return;k=d._trimAlignValue(g-f)}d._slide(b,
e,k);return c}}).keyup(function(b){var c=a(this).data("index.ui-slider-handle");d._keySliding&&(d._keySliding=!1,d._stop(b,c),d._change(b,c),a(this).removeClass("ui-state-active"))});this._refreshValue();this._animateOff=!1},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},_mouseCapture:function(d){var b=
this.options,e,c,f,g,i,h,j,l;if(b.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();e={x:d.pageX,y:d.pageY};c=this._normValueFromMouse(e);f=this._valueMax()-this._valueMin()+1;i=this;this.handles.each(function(b){var d=Math.abs(c-i.values(b));f>d&&(f=d,g=a(this),h=b)});b.range===!0&&this.values(1)===b.min&&(h+=1,g=a(this.handles[h]));b=this._start(d,h);if(b===!1)return!1;this._mouseSliding=!0;i._handleIndex=
h;g.addClass("ui-state-active").focus();j=g.offset();l=!a(d.target).parents().andSelf().is(".ui-slider-handle");this._clickOffset=l?{left:0,top:0}:{left:d.pageX-j.left-g.width()/2,top:d.pageY-j.top-g.height()/2-(parseInt(g.css("borderTopWidth"),10)||0)-(parseInt(g.css("borderBottomWidth"),10)||0)+(parseInt(g.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(d,h,c);this._animateOff=!0;return!0},_mouseStart:function(){return!0},_mouseDrag:function(a){var b=this._normValueFromMouse({x:a.pageX,
y:a.pageY});this._slide(a,this._handleIndex,b);return!1},_mouseStop:function(a){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(a,this._handleIndex);this._change(a,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=!1;return!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,e,c,f;this.orientation==="horizontal"?(b=this.elementSize.width,e=
a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,e=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0));c=e/b;c>1&&(c=1);c<0&&(c=0);this.orientation==="vertical"&&(c=1-c);f=this._valueMax()-this._valueMin();a=this._valueMin()+c*f;return this._trimAlignValue(a)},_start:function(a,b){var e={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(e.value=this.values(b),e.values=this.values());
return this._trigger("start",a,e)},_slide:function(a,b,e){var c,f,g;this.options.values&&this.options.values.length?(c=this.values(b?0:1),this.options.values.length===2&&this.options.range===!0&&(b===0&&e>c||b===1&&e<c)&&(e=c),e!==this.values(b)&&(f=this.values(),f[b]=e,g=this._trigger("slide",a,{handle:this.handles[b],value:e,values:f}),this.values(b?0:1),g!==!1&&this.values(b,e,!0))):e!==this.value()&&(g=this._trigger("slide",a,{handle:this.handles[b],value:e}),g!==!1&&this.value(e))},_stop:function(a,
b){var e={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(e.value=this.values(b),e.values=this.values());this._trigger("stop",a,e)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var e={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(e.value=this.values(b),e.values=this.values());this._trigger("change",a,e)}},value:function(a){if(arguments.length)this.options.value=this._trimAlignValue(a),this._refreshValue(),
this._change(null,0);else return this._value()},values:function(d,b){var e,c,f;if(arguments.length>1)this.options.values[d]=this._trimAlignValue(b),this._refreshValue(),this._change(null,d);else{if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(d):this.value();e=this.options.values;c=arguments[0];for(f=0;f<e.length;f+=1)e[f]=this._trimAlignValue(c[f]),this._change(null,f);this._refreshValue()}},_setOption:function(d,
b){var e,c=0;a.isArray(this.options.values)&&(c=this.options.values.length);a.Widget.prototype._setOption.apply(this,arguments);switch(d){case "disabled":b?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(e=0;e<c;e+=1)this._change(null,e);this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,e;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b),b;b=this.options.values.slice();for(e=0;e<b.length;e+=1)b[e]=
this._trimAlignValue(b[e]);return b},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,e=(a-this._valueMin())%b;a-=e;Math.abs(e)*2>=b&&(a+=e>0?b:-b);return parseFloat(a.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var d=this.options.range,b=this.options,e=this,c=this._animateOff?!1:b.animate,f,g={},
i,h,j,l;this.options.values&&this.options.values.length?this.handles.each(function(d){f=(e.values(d)-e._valueMin())/(e._valueMax()-e._valueMin())*100;g[e.orientation==="horizontal"?"left":"bottom"]=f+"%";a(this).stop(1,1)[c?"animate":"css"](g,b.animate);e.options.range===!0&&(e.orientation==="horizontal"?(d===0&&e.range.stop(1,1)[c?"animate":"css"]({left:f+"%"},b.animate),d===1&&e.range[c?"animate":"css"]({width:f-i+"%"},{queue:!1,duration:b.animate})):(d===0&&e.range.stop(1,1)[c?"animate":"css"]({bottom:f+
"%"},b.animate),d===1&&e.range[c?"animate":"css"]({height:f-i+"%"},{queue:!1,duration:b.animate})));i=f}):(h=this.value(),j=this._valueMin(),l=this._valueMax(),f=l!==j?(h-j)/(l-j)*100:0,g[e.orientation==="horizontal"?"left":"bottom"]=f+"%",this.handle.stop(1,1)[c?"animate":"css"](g,b.animate),d==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[c?"animate":"css"]({width:f+"%"},b.animate),d==="max"&&this.orientation==="horizontal"&&this.range[c?"animate":"css"]({width:100-f+"%"},{queue:!1,
duration:b.animate}),d==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[c?"animate":"css"]({height:f+"%"},b.animate),d==="max"&&this.orientation==="vertical"&&this.range[c?"animate":"css"]({height:100-f+"%"},{queue:!1,duration:b.animate}))}});a.extend(a.ui.slider,{version:"1.8.17"})})(jQuery);
var xField="Budget",yField="Worldwide Gross",xScale,yScale,xAxis,yAxis,xAxisPanel,yAxisPanel,xLegend,yLegend,redBlue="rgb(103, 0, 31);rgb( 178, 24, 43);rgb( 214, 96, 77);rgb( 244, 165, 130);rgb( 253, 219, 199);rgb( 209, 229, 240);rgb( 146, 197, 222);rgb( 67, 147, 195);rgb( 33, 102, 172);rgb( 5, 48, 97)".split(";"),brownBlueGreen="rgb(84, 48, 5);rgb( 140, 81, 10);rgb( 191, 129, 45);rgb( 223, 129, 125);rgb( 246, 232, 195);rgb( 199, 234, 229);rgb( 128, 205, 193);rgb( 53, 151, 143);rgb( 1, 102, 94);rgb( 0, 60, 48)".split(";"),
purpleGreen="rgb(64, 0, 75);rgb( 118, 42, 131);rgb( 153, 112, 171);rgb( 194, 165, 207);rgb( 231, 212, 232);rgb( 217, 240, 211);rgb( 166, 219, 160);rgb( 90, 174, 97);rgb( 27, 120, 55);rgb( 0, 68, 27)".split(";"),redYellowBlue="rgb(165, 0, 38);rgb( 215, 48, 39);rgb( 244, 109, 67);rgb( 253, 174, 97);rgb( 254, 224, 144);rgb( 224, 243, 248);rgb( 171, 217, 233);rgb( 116, 173, 209);rgb( 69, 117, 180);rgb( 49, 54, 149)".split(";"),purpleOrange="rgb(127, 59, 8);rgb( 179, 88, 6);rgb( 224, 130, 20);rgb( 253, 184, 99);rgb( 254, 224, 182);rgb( 216, 218, 235);rgb( 178, 171, 210);rgb( 128, 115, 172);rgb( 84, 39, 136);rgb( 45, 0, 75)".split(";"),
palettes=[redBlue,brownBlueGreen,purpleGreen,redYellowBlue,purpleOrange],currentPaletteIndex=0,currentPalette=palettes[currentPaletteIndex],colorField="Story",categoricalFields=["Story","Genre","Lead Studio"],categoricalColorScale=d3.scale.category20c(),numericColorScale=d3.scale.quantile().range(currentPalette),colorScale=$.inArray(colorField,categoricalFields)>=0?categoricalColorScale:numericColorScale,data,averages,svg,numberFormat=d3.format(",.2f"),intFormat=d3.format(","),percentFormat=d3.format(",p"),
domain=function(a,b){if(arguments.length>1){var c=[d3.min(data,function(a){return $.isNumeric(a[b])?+a[b]:0}),d3.max(data,function(a){return $.isNumeric(a[b])?+a[b]:0})];a==="x"?this.xDomain=c:this.yDomain=c}return a==="x"?this.xDomain:this.yDomain},locate=function(a,b){var c,d;b==="x"?(c=a[xField],d=xScale):(c=a[yField],d=yScale);return $.isNumeric(c)?d(c):domain(b)[0]},colorize=function(a){return colorField!=="None"?colorScale(a[colorField]):null};
d3.json("/data/moviedata.json",function(a){data=a;var a=d3.min(data,function(a){return $.isNumeric(a.Profitability)?+a.Profitability:0}),b=d3.max(data,function(a){return $.isNumeric(a.Profitability)?+a.Profitability:0});$("#profit-slider").slider({min:a,max:b,values:[a,b]});$("#profit-slider-text").val($("#profit-slider").slider("values",0)+" - "+$("#profit-slider").slider("values",1));var a=$("#vis").width(),b=$("#vis").height(),c=[0,a-65],d=[b-65,0];domain("x",xField);domain("y",yField);xScale=
d3.scale.linear().domain(domain("x")).range(c);yScale=d3.scale.linear().domain(domain("y")).range(d);xAxis=d3.svg.axis().scale(xScale).orient("bottom").ticks(5).tickSize(-(b-65),0,0).tickFormat(intFormat);yAxis=d3.svg.axis().orient("left").scale(yScale).ticks(5).tickSize(-(a-65),0,0).tickFormat(intFormat);svg=d3.select("#vis").append("svg").attr("width",a).attr("height",b).append("g").attr("transform","translate(55,10)");xAxisPanel=svg.append("g").attr("class","x axis").attr("id","xTicks").attr("transform",
"translate(0,"+(b-65)+")").call(xAxis);xLegend=svg.append("text").attr("id","xLabel").attr("x",a/2).attr("y",b-65/3).attr("text-anchor","middle").attr("class","axisTitle").text(xField);yAxisPanel=svg.append("g").attr("class","y axis").attr("id","yTicks").attr("transform","translate(0,0)").call(yAxis);yLegend=svg.append("text").attr("id","yLabel").attr("x",b/2).attr("y",65/3).attr("text-anchor","end").attr("class","axisTitle").attr("transform","translate(-65,"+b*0.85+")rotate(-90)").text(yField);svg.selectAll("circle").data(data).enter().append("circle").attr("class",
"point").attr("cx",function(a){return locate(a,"x")}).attr("cy",function(a){return locate(a,"y")}).attr("r",6).style("fill",function(a){return colorize(a)}).on("mouseover",mouseover).on("mouseout",mouseout)});
function mouseover(a){$("#details").css("display","inline");$("#detail-film-value").html(a.Film);$("#detail-year-value").html(a.Year);$("#detail-profitability-value").html(percentFormat(a.Profitability));$("#detail-budget-value").html("$ "+numberFormat(a.Budget)+"M");$("#detail-worldwide-value").html("$ "+numberFormat(a["Worldwide Gross"])+"M");$("#detail-domestic-value").html("$ "+numberFormat(a["Domestic Gross"])+"M");$("#detail-foreign-value").html("$ "+numberFormat(a["Foreign Gross"])+"M");$("#detail-audience-value").html(a["Audience Rating"]);
$("#detail-rotten-value").html(a["Critic Rating"]);$("#detail-theatres-value").html(intFormat(a["Opening Weekend Theaters"]));$("#detail-openingweekend-value").html("$ "+numberFormat(a["Opening Weekend Revenue"])+"M");$("#detail-avgcinema-value").html("$ "+numberFormat(a["Opening Weekend per Cinema"]));$("#detail-genre-value").html(a.Genre);$("#detail-story-value").html(a.Story);$("#detail-oscar-value").html(a.Oscar);$("#detail-studio-value").html(a["Lead Studio"]);d3.select(this).style("stroke-width",
2.5).style("stroke","orange").style("stroke-opacity",1).style("fill-opacity",1)}function mouseout(){d3.select(this).style("stroke-width",null).style("stroke",null).style("stroke-opacity",null).style("fill-opacity",null)}
$(function(){$("#profit-slider").slider({range:!0,min:0,max:100,values:[0,100],slide:function(a,b){$("#profit-slider-text").val(+b.values[0]+" - "+b.values[1])}});$("#profit-slider-text").val($("#profit-slider").slider("values",0)+" - "+$("#profit-slider").slider("values",1));$("#xaxis").val(xField);$("#yaxis").val(yField);$("#color").val(colorField);$("#xaxis").change(function(){xField=$("#xaxis").val();domain("x",xField);xScale.domain(domain("x"));xAxis.scale(xScale);svg.select("#xTicks").call(xAxis);
svg.select("#xLabel").text(xField);redraw()});$("#yaxis").change(function(){yField=$("#yaxis").val();domain("y",yField);yScale.domain(domain("y"));yAxis.scale(yScale);svg.select("#yTicks").call(yAxis);svg.select("#yLabel").text(yField);redraw()});$("#color").change(function(){colorField=$("#color").val();colorScale=$.inArray(colorField,categoricalFields)>=0?categoricalColorScale:numericColorScale.domain([d3.min(data,function(a){return a[colorField]}),d3.sum(data,function(a){return a[colorField]})/
data.length,d3.max(data,function(a){return a[colorField]})]);redraw()});$("#profit-slider").on("slidestop",function(a,b){console.log("Filter out profitability values not in range: "+b.values[0]+" / "+b.values[1])})});function redraw(){svg.selectAll("circle").data(data).transition().duration(1E3).attr("cx",function(a){return locate(a,"x")}).attr("cy",function(a){return locate(a,"y")}).style("fill",function(a){return colorize(a)})};
