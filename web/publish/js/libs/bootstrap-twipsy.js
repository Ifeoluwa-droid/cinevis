(function(b){var e;b(document).ready(function(){b.support.transition=function(){var a=(document.body||document.documentElement).style;return a.transition!==void 0||a.WebkitTransition!==void 0||a.MozTransition!==void 0||a.MsTransition!==void 0||a.OTransition!==void 0}();b.support.transition&&(e="TransitionEnd",b.browser.webkit?e="webkitTransitionEnd":b.browser.mozilla?e="transitionend":b.browser.opera&&(e="oTransitionEnd"))});var i=function(a,f){this.$element=b(a);this.options=f;this.enabled=!0;this.fixTitle()};
i.prototype={show:function(){var a,f,c,g,d,h;if(this.hasContent()&&this.enabled){d=this.tip();this.setContent();this.options.animate&&d.addClass("fade");d.remove().css({top:0,left:0,display:"block"}).prependTo(document.body);a=b.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight});f=d[0].offsetWidth;c=d[0].offsetHeight;g=typeof this.options.placement=="function"?this.options.placement.apply(this,[d[0],this.$element[0]]):this.options.placement;
switch(g){case "below":h={top:a.top+a.height+this.options.offset,left:a.left+a.width/2-f/2};break;case "above":h={top:a.top-c-this.options.offset,left:a.left+a.width/2-f/2};break;case "left":h={top:a.top+a.height/2-c/2,left:a.left-f-this.options.offset};break;case "right":h={top:a.top+a.height/2-c/2,left:a.left+a.width+this.options.offset}}d.css(h).addClass(g).addClass("in")}},setContent:function(){var a=this.tip();a.find(".twipsy-inner")[this.options.html?"html":"text"](this.getTitle());a[0].className=
"twipsy"},hide:function(){function a(){f.remove()}var f=this.tip();f.removeClass("in");b.support.transition&&this.$tip.hasClass("fade")?f.bind(e,a):a()},fixTitle:function(){var a=this.$element;if(a.attr("title")||typeof a.attr("data-original-title")!="string")a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getTitle:function(){var a,b=this.$element,c=this.options;this.fixTitle();typeof c.title=="string"?a=b.attr(c.title=="title"?
"data-original-title":c.title):typeof c.title=="function"&&(a=c.title.call(b[0]));return(a=(""+a).replace(/(^\s*|\s*$)/,""))||c.fallback},tip:function(){return this.$tip=this.$tip||b('<div class="twipsy" />').html(this.options.template)},validate:function(){if(!this.$element[0].parentNode)this.hide(),this.options=this.$element=null},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?
"hide":"show"]()}};b.fn.twipsy=function(a){b.fn.twipsy.initWith.call(this,a,i,"twipsy");return this};b.fn.twipsy.initWith=function(a,f,c){function g(j){var d=b.data(j,c);d||(d=new f(j,b.fn.twipsy.elementOptions(j,a)),b.data(j,c,d));return d}function d(){var b=g(this);b.hoverState="in";a.delayIn==0?b.show():(b.fixTitle(),setTimeout(function(){b.hoverState=="in"&&b.show()},a.delayIn))}function h(){var b=g(this);b.hoverState="out";a.delayOut==0?b.hide():setTimeout(function(){b.hoverState=="out"&&b.hide()},
a.delayOut)}var e,i,k;if(a===!0)return this.data(c);else if(typeof a=="string"){if(e=this.data(c))e[a]();return this}a=b.extend({},b.fn[c].defaults,a);a.live||this.each(function(){g(this)});a.trigger!="manual"&&(e=a.live?"live":"bind",i=a.trigger=="hover"?"mouseenter":"focus",k=a.trigger=="hover"?"mouseleave":"blur",this[e](i,d)[e](k,h));return this};b.fn.twipsy.Twipsy=i;b.fn.twipsy.defaults={animate:!0,delayIn:0,delayOut:0,fallback:"",placement:"above",html:!1,live:!1,offset:0,title:"title",trigger:"hover",
template:'<div class="twipsy-arrow"></div><div class="twipsy-inner"></div>'};b.fn.twipsy.rejectAttrOptions=["title"];b.fn.twipsy.elementOptions=function(a,f){for(var c=b(a).data(),e=b.fn.twipsy.rejectAttrOptions,d=e.length;d--;)delete c[e[d]];return b.extend({},f,c)}})(window.jQuery||window.ender);
